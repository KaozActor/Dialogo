<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Diálogo de Hacker</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <header>
        <nav>
            <button onclick="window.location='index.html'">Voltar ao Menu</button>
            <button onclick="toggleDevice()" id="toggle-device">PC/Mobile</button>
        </nav>
    </header>
    <main>
        <section id="dialogue-container">
            <img id="character" src="" alt="Personagem">
            <div id="dialogue"></div>
            <button id="nextBtn" style="display: none;">Próximo</button>
        </section>
        <section id="sound-container">
            <button id="sound-button">Desligar Som</button>
            <audio id="sound"></audio>
        </section>
    </main>
    <script>
    const dialogues = [
        // Linhas de diálogo
        { text: "Olá jogador, bom te ver de novo", img: "character1.png" },
        { text: "Aqui você pode conversar comigo a vontade", img: "character2.png" },
        { text: "É bem útil para sei lá... pedir dicas? kk", img: "character1.png" }
    ];

    const devices = {
        mobile: {
            width: '100vw',
            height: '90vh',
            fontSize: '24px'
        },
        pc: {
            width: '80vw',
            height: '80vh',
            fontSize: '36px'
        }
    };

    let currentDialogueIndex = 0;
    let soundOn = true;
    let currentDevice = 'mobile';

    function typeText(text, element, callback) {
        element.innerHTML = '';
        let index = 0;
        let sound = document.getElementById('sound');

        function type() {
            if (index < text.length) {
                element.innerHTML += text.charAt(index);
                index++;
                setTimeout(type, 50); // Ajusta a velocidade da digitação aqui
                if (soundOn) {
                    sound.src = 'sound/beep.wav'; // Substitua por seu arquivo de som
                    sound.play();
                    setTimeout(() => sound.pause(), 100); // Pausar o som após 100ms
                }
            } else {
                callback();
            }
        }

        type();
    }

    function showDialogue() {
        const dialogueObj = dialogues[currentDialogueIndex];
        const dialogueElement = document.getElementById('dialogue');
        const characterImage = document.getElementById('character');

        characterImage.src = dialogueObj.img;
        characterImage.width = getDeviceWidth() * 0.2;
        dialogueElement.style.fontSize = getDeviceFontSize();
        typeText(dialogueObj.text, dialogueElement, () => {
            document.getElementById('nextBtn').style.display = 'block';
        });
    }

    function getDeviceWidth() {
        return document.body.clientWidth;
    }

    function getDeviceFontSize() {
        return getDeviceWidth() * 0.05;
    }

    function toggleDevice() {
        if (currentDevice === 'mobile') {
            currentDevice = 'pc';
            document.body.style.width = devices['pc'].width;
            document.body.style.height = devices['pc'].height;
            document.getElementById('dialogue-container').style.width = devices['pc'].width;
            document.getElementById('dialogue-container').style.height = devices['pc'].height;
            document.getElementById('dialogue').style.fontSize = devices['pc'].fontSize;
            document.getElementById('character').style.width = getDeviceWidth() * 0.2;
        } else {
            currentDevice = 'mobile';
            document.body.style.width = devices['mobile'].width;
            document.body.style.height = devices['mobile'].height;
            document.getElementById('dialogue-container').style.width = devices['mobile'].width;
            document.getElementById('dialogue-container').style.height = devices['mobile'].height;
            document.getElementById('dialogue').style.fontSize = devices['mobile'].fontSize;
            document.getElementById('character').style.width = getDeviceWidth() * 0.2;
        }
        document.getElementById('toggle-device').innerHTML = currentDevice === 'mobile' ? 'PC' : 'Mobile';
    }

    function updateUI() {
        showDialogue();
        document.getElementById('nextBtn').style.display = (currentDialogueIndex < dialogues.length) ? 'block' : 'none';
        document.getElementById('sound-button').style.fontSize = getDeviceFontSize();
        document.getElementById('toggle-device').style.fontSize = getDeviceFontSize();
        document.getElementById('sound-button').innerHTML = soundOn ? 'Desligar Som' : 'Ligar Som';
    }

    document.getElementById('nextBtn').addEventListener('click', () => {
        currentDialogueIndex++;
        if (currentDialogueIndex < dialogues.length) {
            document.getElementById('nextBtn').style.display = 'none';
            showDialogue();
        } else {
            document.getElementById('dialogue').innerHTML = 'Fim da conversa!';
            document.getElementById('nextBtn').style.display = 'none';
            document.getElementById('sound-button').innerHTML = 'Ligar Som';
            soundOn = false;
            // Aqui você pode reiniciar ou fazer algo no fim
        }
    });

    document.getElementById('sound-button').addEventListener('click', function() {
        if (document.getElementById('sound-button').innerHTML === 'Desligar Som') {
            soundOn = true;
            document.getElementById('sound-button').innerHTML = 'Desligar Som';
        } else {
            soundOn = false;
            document.getElementById('sound-button').innerHTML = 'Ligar Som';
        }
        updateUI();
    });

    document.addEventListener('DOMContentLoaded', updateUI);
    </script>
</body>
</html>
